<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Word Rush</title>
<style>
    .background-gif {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
    }
    .content {
        position: relative;
        z-index: 1;
        color: white;
        text-align: center;
        margin-top: 50px;
    }

  :root {
    --accent: #00ffc6;
    --bg-1: #0b0f14;
    --bg-2: #05070a;
  }

  @keyframes glowPulse {
    0% { text-shadow: 0 0 5px var(--accent), 0 0 20px var(--accent); }
    50% { text-shadow: 0 0 15px var(--accent), 0 0 40px var(--accent); }
    100% { text-shadow: 0 0 5px var(--accent), 0 0 20px var(--accent); }
  }
  @keyframes bgMove { from { background-position:0 0; } to { background-position:1000px 1000px; } }
  @keyframes fadeOut { to { opacity:0; transform:scale(1.5); } }
  @keyframes fadeInOut { 0% { opacity:0; transform:scale(0.7);} 10% {opacity:1; transform:scale(1);} 90% {opacity:1; transform:scale(1);} 100% {opacity:0; transform:scale(1.2);} }
  @keyframes shoot { from { transform: translateY(0); opacity:1; } to { transform: translateY(-90vh); opacity:0; } }
  @keyframes explode { to { transform: scale(4); opacity:0; } }

  html,body { height:100%; margin:0; font-family:"Courier New", monospace; color:#fff;
    background: radial-gradient(circle at center, var(--bg-1), var(--bg-2));
    display:flex; justify-content:center; align-items:flex-start; overflow:hidden;
  }

  #gameContainer { width:100%; max-width:900px; height:100vh; display:flex; flex-direction:column; justify-content:space-between; }

  #hud { display:flex; justify-content:space-between; align-items:center; padding:10px 18px; background:rgba(0,0,0,0.35); border-bottom:1px solid var(--accent); }
  #hud #score { font-weight:700; color:var(--accent); }
  #healthBar { width:220px; height:20px; border:2px solid var(--accent); border-radius:6px; overflow:hidden; }
  #bar { width:100%; height:100%; background:linear-gradient(90deg,#00ff99,#00ffc6,#0099ff); transition:width 0.25s linear; }

  #gameArea { position:relative; flex:1 1 auto; margin:0 10px; overflow:hidden;
    background: repeating-linear-gradient(45deg, #0c1117 0px, #0c1117 2px, #0b0f14 2px, #0b0f14 4px);
    animation:bgMove 20s linear infinite; border-bottom:3px solid #ff0044;
  }

  .word { position:absolute; font-size:clamp(14px,2.2vw,20px); color:var(--accent); animation:glowPulse 1.6s infinite; white-space:nowrap; user-select:none; }
  .beam { position:absolute; width:2px; background:linear-gradient(to top,var(--accent),transparent); animation:shoot 0.22s linear forwards; }
  .explosion { position:absolute; width:10px; height:10px; border-radius:50%; background:radial-gradient(circle,#fff,var(--accent)); animation:explode 0.28s ease-out forwards; }
  .scorePop { position:absolute; font-size:14px; color:var(--accent); transform-origin:center; animation:fadeOut 0.6s ease-out forwards; }

  #inputArea { text-align:center; padding:10px;  bottom:1vh; width:100%; }
  input[type="text"] { width:62%; max-width:760px; padding:10px 12px; font-size:clamp(16px,2vw,18px);
    background:rgba(0,0,0,0.3); color:var(--accent); border:1px solid var(--accent); border-radius:6px; outline:none;
  }

  #overlay { position:fixed; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center;
    background:rgba(0,0,0,0.96); color:var(--accent); z-index:9999; text-align:center; padding:20px; opacity:1; transition:opacity 1s, transform 1s;
  }
  #overlay h1 { font-size:2.4rem; margin:0 0 12px; animation:glowPulse 2s infinite; }
  
  #overlay footer {
    margin-top: 25px;
    font-size: 0.9rem;
    opacity: 0.7;
  }
  #overlay #aboutLink {
    margin-top: 8px;
    font-size: 0.95rem;
    color: var(--accent);
    cursor: pointer;
    text-decoration: underline;
  }

  .menu-btn { margin-top:8px; padding:10px 22px; border-radius:8px; border:2px solid var(--accent); background:transparent; color:var(--accent); cursor:pointer; font-size:1.1rem; }
  #btnRow { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }

  .modal { position:fixed; inset:0; background:rgba(0,0,0,0.85); display:flex; align-items:center; justify-content:center; z-index:10000; display:none; flex-direction:column; color:#fff; text-align:center; }
  .modal-content { background:rgba(20,20,30,0.9); padding:20px; border:2px solid var(--accent); border-radius:10px; width:280px; max-height: 400px; overflow-y: auto; }
  .modal button { margin:5px; padding:8px 16px; border:none; background:var(--accent); color:#000; font-weight:bold; border-radius:6px; cursor:pointer; }
  .closeModal { margin-top:10px; background:#222; color:var(--accent); border:1px solid var(--accent); }

  /* Game Over Modal */
  #gameOverModal {
    position:fixed; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center;
    background:rgba(0,0,0,0.95); color:var(--accent); z-index:10001; text-align:center;
    font-size:1.8rem; font-weight:bold; padding:20px;
    opacity:0; transform:scale(0.7); pointer-events:none; transition:opacity 0.5s, transform 0.5s;
  }
  #gameOverModal.show {
    opacity:1; transform:scale(1); pointer-events:auto;
  }
  #gameOverModal button {
    margin-top:15px; padding:10px 20px; font-size:1rem; border-radius:8px; border:2px solid var(--accent);
    background:transparent; color:var(--accent); cursor:pointer;
  }
  #menuBtn {
    margin-top: 10px;
  }
</style>
</head>
<body>
    
<img src="background.gif" class="background-gif"></img>
<div class="content"></div>
    
<div id="gameContainer">
  <div id="overlay">
    <h1>WORD RUSH</h1>
    <br>
    <p>Type fast. Defend.<br>The boredom buster and a finger workout.<br>Can you handle the pressure?</p>
    <button id="startBtn" class="menu-btn">START</button>
    <div id="btnRow">
      <button id="musicBtn" class="menu-btn">Music</button>
      <button id="themeBtn" class="menu-btn">Theme</button>
    </div>
    <div id="topScores"></div>
    <footer>© 2025 Word Rush. All rights reserved.</footer>
    <div id="aboutLink">about</div>
  </div>  

  <div id="hud">
    <div>Score: <span id="score">0</span></div>
    <div><div id="healthBar"><div id="bar"></div></div></div>
  </div>

  <div id="gameArea"></div>

  <div id="inputArea">
    <input id="input" type="text" placeholder="Type here..." autocomplete="off" disabled>
  </div>
</div>

<audio id="bgMusic" loop>
  <source src="default.mp3" type="audio/mpeg">
</audio>

<!-- MUSIC MODAL -->
<div id="musicModal" class="modal">
  <div class="modal-content">
    <h3>Background Music</h3>
    <button id="uploadMusic">Upload Custom</button>
    <input id="volumeControl" type="range" min="0" max="1" step="0.05" value="0.4">
    <button class="closeModal" onclick="closeModal('musicModal')">Close</button>
  </div>
</div>

<!-- THEME MODAL -->
<div id="themeModal" class="modal">
  <div class="modal-content">
    <h3>Select Theme</h3>
    <button onclick="setTheme('dark')">Dark</button>
    <button onclick="setTheme('neon')">Neon</button>
    <button onclick="setTheme('space')">Space</button>
    <button onclick="setTheme('fire')">Fire</button>
    <button onclick="setTheme('ice')">Ice</button>
    <button class="closeModal" onclick="closeModal('themeModal')">Close</button>
  </div>
</div>

<!-- ABOUT MODAL -->
<div id="aboutModal" class="modal">
  <div class="modal-content" style="max-height: 300px; overflow-y: auto;">
    <h3>About Word Rush</h3>
    <p>
      Fast-paced typing game for killing boredom or flexing your typing skills. <br><br>Developed solo with a help from AI and NCS beats.<br>
      
<br><br>Contact/support:<br> iamfinix0172@gmail.com

<br><br>
<strong>v1.0 – Initial release.</strong>
    </p>
    <button class="closeModal" onclick="closeModal('aboutModal')">Close</button>
  </div>
</div>

<!-- GAME OVER MODAL -->
<div id="gameOverModal">
  <div id="gameOverText"></div>
  <button id="restartBtn">Restart</button>
  <button id="menuBtn" class="menu-btn">Menu</button>
</div>

<script>
const MAX_ACTIVE=6, SPAWN_INTERVAL=2000, BASE_FALL_SPEED=40, SPEED_INCREASE_PER_SEC=1.8;
const WORD_LIST=["apple","river","storm","glass","flame","ocean","stone","dream","light","swift","spark","pulse","grain","sound","cloud","field","plant","peace","trail","fire","wind","leaf","rain","star","wave","moon","sky","rock","sand","path","seed","fog","ice","sun","dust","root","hill","bay","pine","mist","echo","nest","frost","bark","thorn","vine","lake","beach","drift","ember","shore","cave","gale","dew","petal","glow","rift","stream","shade","blaze","dusk","dawn","spire","peak","brook","lumen","sway","ash","coil","maze","veil","hush","glint","flint","crag","grove","lark","brim","tide","realm","swirl","crest","plume","quill","shard","hollow","gleam","bloom","fable","harp","moss","sprig","cinder","tarn","gloom","snare","pike","roar","fang","hoof","scar","veil","spear","torch","fang","drum","glade","rift","pond","whale","cliff","spar","spire","crane","rush","thorny","cove","lagoon","beet","fern","fern","thatch","craggy","briar","sparkle","flake","twig","cobble","bramble","shimmer","sleet","glisten","hum","knoll","burrow","pebble","scout","fangs","fawn","hunt","sable","wolf","fox","cub","owl","hawk","moth","wing","fang","toad","slug","puddle","brooklet","hollow","bough","sap","lichen","fume","ember","smoke","coil","ash","smelt","fume","glint","gleam","spike","thorn","shard","crust","flake","mire","clump","knit","wisp","curl","gleam","flick","tangle","snag","latch","bolt","gear","cog","link","rim","pin","bar","strap","belt","rope","chain","hook","pad","cap","lid","jug","pot","bowl","cup","mug","spoon","fork","knife","plate","pan","tray","rack","beam","plank","block","log","brick","tile","nail","peg","rod","pipe","wire","cord","cords","mesh","net","screen","grid","tile","pane","glassy","slab","slate","chalk","chalky","dusty","muddy","rocky"];

const gameArea=document.getElementById("gameArea"), input=document.getElementById("input"),
      scoreEl=document.getElementById("score"), barEl=document.getElementById("bar"),
      overlay=document.getElementById("overlay"), startBtn=document.getElementById("startBtn"),
      musicBtn=document.getElementById("musicBtn"), bgMusic=document.getElementById("bgMusic"),
      themeBtn=document.getElementById("themeBtn"), topScoresDiv=document.getElementById("topScores"),
      gameOverModal=document.getElementById("gameOverModal"),
      gameOverText=document.getElementById("gameOverText"),
      restartBtn=document.getElementById("restartBtn"),
      menuBtn=document.getElementById("menuBtn"),
      aboutLink=document.getElementById("aboutLink");

let activeWords=[], score=0, health=100, spawnTimer=null, running=false, lastFrame=null, startTime=0;
let highScores=JSON.parse(localStorage.getItem("topScores")||"[]");

function openModal(id){document.getElementById(id).style.display="flex";}
function closeModal(id){document.getElementById(id).style.display="none";}
musicBtn.onclick=()=>openModal("musicModal");
themeBtn.onclick=()=>openModal("themeModal");
aboutLink.onclick=()=>openModal("aboutModal");
menuBtn.onclick=()=>{
  gameOverModal.classList.remove("show");
  overlay.style.display = "flex";
};

document.getElementById("uploadMusic").onclick=()=>{
  const picker=document.createElement("input");
  picker.type="file"; picker.accept="audio/*";
  picker.onchange=e=>{const file=e.target.files[0]; if(file){bgMusic.src=URL.createObjectURL(file); alert("Custom music loaded!");}};
  picker.click();
};
document.getElementById("volumeControl").oninput=e=>bgMusic.volume=e.target.value;

function setTheme(t){
  const root=document.documentElement;
  if(t==="dark"){root.style.setProperty("--accent","#00ffc6");root.style.setProperty("--bg-1","#0b0f14");root.style.setProperty("--bg-2","#05070a");}
  if(t==="neon"){root.style.setProperty("--accent","#ff00ff");root.style.setProperty("--bg-1","#0a0014");root.style.setProperty("--bg-2","#150022");}
  if(t==="space"){root.style.setProperty("--accent","#00ccff");root.style.setProperty("--bg-1","#000010");root.style.setProperty("--bg-2","#020824");}
  if(t==="fire"){root.style.setProperty("--accent","#ff6600");root.style.setProperty("--bg-1","#200000");root.style.setProperty("--bg-2","#400000");}
  if(t==="ice"){root.style.setProperty("--accent","#66ffff");root.style.setProperty("--bg-1","#001020");root.style.setProperty("--bg-2","#003344");}
  closeModal('themeModal');
}

function spawnExplosion(x,y){
  const ex=document.createElement("div");
  ex.className="explosion";
  ex.style.left=(x-6)+"px";
  ex.style.top=(y-6)+"px";
  gameArea.appendChild(ex);
  setTimeout(()=>ex.remove(),320);
}

function spawnBeam(x,y){
  const b=document.createElement("div");
  b.className="beam";
  b.style.left=(x-1)+"px";
  b.style.top=(gameArea.clientHeight*0.9)+"px";
  b.style.height=Math.max(20,gameArea.clientHeight*0.9-y)+"px";
  gameArea.appendChild(b);
  setTimeout(()=>b.remove(),240);
}

function spawnScorePopup(x,y,val){
  const p=document.createElement("div");
  p.className="scorePop";
  p.style.left=x+"px";
  p.style.top=(y-18)+"px";
  p.textContent="+"+val;
  gameArea.appendChild(p);
  setTimeout(()=>p.remove(),600);
}

function spawnWord(){
  const txt=WORD_LIST[Math.floor(Math.random()*WORD_LIST.length)];
  const el=document.createElement("div");
  el.className="word";
  el.textContent=txt;
  const x=Math.random()*(gameArea.clientWidth-100);
  el.style.left=x+"px";
  el.style.top="-8px";
  gameArea.appendChild(el);
  activeWords.push({el,y:-8,x,speed:BASE_FALL_SPEED});
}

function removeWord(i){
  if(activeWords[i]){
    activeWords[i].el.remove();
    activeWords.splice(i,1);
  }
}

function trySpawn(){ if(running && activeWords.length<MAX_ACTIVE) spawnWord(); }

function gameLoop(ts){
  if(!lastFrame) lastFrame=ts;
  const dt=(ts-lastFrame)/1000; 
  lastFrame=ts;
  const elapsed=(ts-startTime)/1000;
  const diffBoost=Math.floor(elapsed/10)*SPEED_INCREASE_PER_SEC;

  for(let i=activeWords.length-1;i>=0;i--){
    const w=activeWords[i];
    w.y+=(w.speed+diffBoost)*dt;
    w.el.style.top=w.y+"px";
    if(w.y>gameArea.clientHeight*0.9){
      removeWord(i);
      health=Math.max(0,health-12);
      barEl.style.width=health+"%";
      if(health<=0) return endGame();
    }
  }

  if(running) requestAnimationFrame(gameLoop);
}

function startGame(){
  // Reset game variables
  running=true; score=0; health=100; lastFrame=null;
  scoreEl.textContent=score; barEl.style.width="100%";
  activeWords.forEach(w=>w.el.remove()); 
  activeWords=[];

  overlay.style.display="none"; 
  input.disabled=false; input.value=""; input.focus();

  if(spawnTimer) clearInterval(spawnTimer);
  spawnTimer=setInterval(trySpawn,SPAWN_INTERVAL);
  trySpawn(); 
  startTime=performance.now();
  requestAnimationFrame(gameLoop);

  bgMusic.volume=0.4; 
  bgMusic.currentTime=0; 
  bgMusic.play().catch(()=>{});
}

function endGame(){
  running=false;
  if(spawnTimer) clearInterval(spawnTimer);
  bgMusic.pause();

  // Save Top Scores
  highScores.push(score);
  highScores.sort((a,b)=>b-a);
  if(highScores.length>3) highScores=highScores.slice(0,3);
  localStorage.setItem("topScores",JSON.stringify(highScores));
  displayTopScores();

  // Show Game Over modal
  gameOverText.textContent=`GAME OVER!
Final Score: ${score}`;
  gameOverModal.classList.add("show");

  input.disabled=true;
}

// Restart Button
restartBtn.addEventListener("click", () => {
  gameOverModal.classList.remove("show");
  startGame();
});

// Menu Button in Game Over Modal
menuBtn.addEventListener("click", () => {
  gameOverModal.classList.remove("show");
  overlay.style.display = "flex";
});

function displayTopScores(){
  topScoresDiv.innerHTML="<h4>🏆 Top Scores</h4>";
  highScores.forEach((s,i)=>{
    topScoresDiv.innerHTML += `<div>${i+1}. ${s}</div>`;
  });
}

input.addEventListener("input",()=>{
  const typed=input.value.trim();
  if(!typed) return;
  for(let i=0;i<activeWords.length;i++){
    const w=activeWords[i];
    if(w.el.textContent===typed){
      const rect=w.el.getBoundingClientRect(), gr=gameArea.getBoundingClientRect();
      const x=rect.left-gr.left+(w.el.offsetWidth/2), y=rect.top-gr.top+(w.el.offsetHeight/2);
      spawnBeam(x,y); spawnExplosion(x,y); spawnScorePopup(x,y,10);
      score+=10; scoreEl.textContent=score; removeWord(i);
      input.value=""; break;
    }
  }
});

startBtn.addEventListener("click", startGame);
displayTopScores();
</script>
</body>
</html>